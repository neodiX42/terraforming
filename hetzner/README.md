##Hetzner swarm terraform and ansible scripts
###Launch instances with Terraform 
1. Install terraform and put it in your PATH.
2. Edit variables.tf, set hcloud_token to api token and swarm details

####Launch / Update:
```
terraform init
terraform plan -out out.txt
terraform apply out.txt
```

####Generate ansible inventory
```
terraform output rendered
```

####Destroy:

```
terraform destroy
```

###Provision instances with Ansible
1. Install ansible and put it in your PATH.
2. Create inventory file, use provided sample and inject inventory generated by terraform

####Initialize provision
```
ansible-playbook --inventory ./etc/ansible_inventory -l validators ./ansible-playbooks/run.yml
```

####Reboot all hosts (recommended after provisioning)
```
ansible-playbook --inventory ./etc/ansible_inventory -l validators ./ansible-playbooks/reboot.yml
```


